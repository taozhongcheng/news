<div class="upload__html">
    <label class="layui-form-label">封面图 </label>

    <div class="layui-upload">
      <i class="iconfont icon-shangchuantupian" id="[id]"></i>
      <div class="upload__html-list"></div>
    </div>
</div>

<script>
  	layui.use(['upload'], function () {
      var  layer = layui.layer,upload = layui.upload;
      // 是否上传多张
      const multiple = [multiple]//[multiple] ? true :false;
       //多图片上传
      upload.render({
        elem: '#[id]',
        url: 'https://httpbin.org/post', //改成您自己的上传接口
       // multiple,
        before: function (obj) {
          //预读本地文件示例，不支持ie8
          obj.preview(function (index, file, result) {
            $('.upload__html-list').append('<img src="' + result + '" data-index="' + index +'"class="layui-upload-img">')
             isHideAdd()
          });
        },
        done: function (res) {
          //上传完毕
        },
        error: function () {
          //请求异常回调
        }
      });

      function isHideAdd(){
        const length = $('.upload__html-list').find('img').length
         (length && !multiple) ? $('#[id]').hide() : $('#[id]').show()
      }
    })
</script>